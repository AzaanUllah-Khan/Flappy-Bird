<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird Game</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            background-color: #70c5ce;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            margin-top: 20px;
            color: #fff;
        }

        #gameArea {
            position: relative;
            width: 90vw;
            height: 70vh;
            background-color: #70c5ce;
            overflow: hidden;
            margin: 0 auto;
            border: 2px solid #fff;
            border-radius: 10px;
            background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/089918d8-99ff-45de-a084-3fe85d0e3fcc/dg34rsu-29a3d144-dc3f-473e-a949-f73a4ba1ef7c.png/v1/fill/w_608,h_457,q_80,strp/flappy_bird_backdrop_by_lenaxux_dg34rsu-fullview.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NDU3IiwicGF0aCI6IlwvZlwvMDg5OTE4ZDgtOTlmZi00NWRlLWEwODQtM2ZlODVkMGUzZmNjXC9kZzM0cnN1LTI5YTNkMTQ0LWRjM2YtNDczZS1hOTQ5LWY3M2E0YmExZWY3Yy5wbmciLCJ3aWR0aCI6Ijw9NjA4In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0._FI7nnUO3ZCIz23z4_juaIbbiEa_LQd1lX6MK-0iUEE");
        }

        .bird {
            position: absolute;
            width: 34px;
            height: 24px;
            background-color: yellow;
            border-radius: 50%;
            top: 40%;
            left: 20%;
        }

        .pipe {
            position: absolute;
            width: 52px;
            background-color: #0f0;
        }

        .pipe-top {
            height: 40%;
        }

        .pipe-bottom {
            height: 60%;
            top: 40%;
        }

        .score-board {
            color: #fff;
            margin-top: 10px;
        }

        #startButton {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #fff;
            border: none;
            border-radius: 5px;
            color: #70c5ce;
        }

        #startButton:hover {
            background-color: #ccc;
        }

        #endGameMessage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 5px;
            display: none;
        }

        #endGameMessage.show {
            display: block;
        }

        #newGameButton {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #fff;
            border: none;
            border-radius: 5px;
            color: #70c5ce;
        }

        #newGameButton:hover {
            background-color: #ccc;
        }
    </style>
</head>

<body>
    <h1>Flappy Bird Game</h1>
    <div id="gameArea">
        <div id="bird" class="bird"></div>
    </div>
    <div class="score-board">
        <h2>Score: <span id="score">0</span></h2>
        <button id="startButton">Start Game</button>
    </div>
    <div id="endGameMessage">
        <h2>Game Over!</h2>
        <p>Your final score is <span id="finalScore">0</span></p>
        <button id="newGameButton">Start New Game</button>
    </div>
    <audio id="flapSound" src="https://www.soundjay.com/button/sounds/button-29.mp3" preload="auto"></audio>
    <audio id="hitSound" src="https://www.soundjay.com/button/sounds/button-10.mp3" preload="auto"></audio>
    <audio id="pointSound" src="https://www.soundjay.com/button/sounds/button-4.mp3" preload="auto"></audio>
    <script>
        const gameArea = document.getElementById('gameArea');
        const bird = document.getElementById('bird');
        const startButton = document.getElementById('startButton');
        const scoreBoard = document.getElementById('score');
        const endGameMessage = document.getElementById('endGameMessage');
        const finalScore = document.getElementById('finalScore');
        const newGameButton = document.getElementById('newGameButton');
        const flapSound = document.getElementById('flapSound');
        const hitSound = document.getElementById('hitSound');
        const pointSound = document.getElementById('pointSound');
        let gameInterval, gravityInterval, pipeInterval;
        let birdY = gameArea.offsetHeight / 2;
        let birdVelocity = 0;
        let pipes = [];
        let score = 0;
        let isGameRunning = false;

        function startGame() {
            if (isGameRunning) return;
            isGameRunning = true;
            score = 0;
            scoreBoard.textContent = score;
            birdY = gameArea.offsetHeight / 2;
            birdVelocity = 0;
            pipes = [];
            gameArea.innerHTML = '';
            gameArea.appendChild(bird);
            bird.style.top = `${birdY}px`;

            gameInterval = setInterval(updateGame, 20);
            gravityInterval = setInterval(applyGravity, 20);
            pipeInterval = setInterval(createPipe, 2000);

            document.addEventListener('keydown', handleKeyPress);
        }

        function updateGame() {
            birdY += birdVelocity;
            bird.style.top = `${birdY}px`;

            if (birdY >= gameArea.offsetHeight || birdY <= 0) {
                endGame();
            }

            pipes.forEach(pipe => {
                pipe.top.style.left = `${pipe.x}px`;
                pipe.bottom.style.left = `${pipe.x}px`;
                pipe.x -= 2;

                if (pipe.x + pipe.width < 0) {
                    pipe.top.remove();
                    pipe.bottom.remove();
                    pipes.shift();
                    score++;
                    scoreBoard.textContent = score;
                    pointSound.play();
                }

                if (
                    (bird.offsetLeft + bird.offsetWidth > pipe.x && bird.offsetLeft < pipe.x + pipe.width) &&
                    (bird.offsetTop < pipe.top.offsetHeight || bird.offsetTop + bird.offsetHeight > pipe.bottom.offsetTop)
                ) {
                    endGame();
                }
            });
        }

        function applyGravity() {
            birdVelocity += 0.2;
        }

        function handleKeyPress(event) {
            if (event.key === 'ArrowUp' || event.type === 'touchstart') {
                birdVelocity = -5;
                flapSound.play();
            }
        }


        function createPipe() {
            const pipeGap = 150;
            const pipeWidth = 52;
            const pipeTopHeight = Math.random() * (gameArea.offsetHeight - pipeGap);

            const pipeTop = document.createElement('div');
            pipeTop.classList.add('pipe', 'pipe-top');
            pipeTop.style.height = `${pipeTopHeight}px`;
            pipeTop.style.width = `${pipeWidth}px`;
            pipeTop.style.left = `${gameArea.offsetWidth}px`;

            const pipeBottom = document.createElement('div');
            pipeBottom.classList.add('pipe', 'pipe-bottom');
            pipeBottom.style.height = `${gameArea.offsetHeight - pipeTopHeight}px`;
            pipeBottom.style.width = `${pipeWidth}px`;
            pipeBottom.style.left = `${gameArea.offsetWidth}px`;
            pipeBottom.style.top = `${pipeTopHeight + pipeGap}px`;

            gameArea.appendChild(pipeTop);
            gameArea.appendChild(pipeBottom);

            pipes.push({
                top: pipeTop,
                bottom: pipeBottom,
                x: gameArea.offsetWidth,
                width: pipeWidth,
            });
        }

        function endGame() {
            clearInterval(gameInterval);
            clearInterval(gravityInterval);
            clearInterval(pipeInterval);
            isGameRunning = false;
            hitSound.play();
            finalScore.textContent = score;
            endGameMessage.classList.add('show');
        }

        function startNewGame() {
            endGameMessage.classList.remove('show');
            startGame();
        }

        startButton.addEventListener('click', startGame);
        newGameButton.addEventListener('click', startNewGame);
        document.addEventListener('touchstart', handleKeyPress);
    </script>
</body>

</html>